{% extends "layout.html" %}
{% block title %}Vianu Biologists{% endblock %}

{% block content %}
<div class="homepage">

  <header class="hp-header">
    <h1>Vianu Biologists</h1>
    {# am scos subtitlul "Biologie × Robotică × AI" #}
  </header>

  <section class="dna-layout">

    <!-- dreapta sus -->
    <article class="dna-box box-about" id="box-about">
      <h2>CINE SUNTEM?</h2>
      <p>Despre club, valori, proiecte.</p>
      <a class="btn" href="{{ url_for('about') }}">Vezi echipa</a>
    </article>

    <!-- stânga mijloc -->
    <article class="dna-box box-gallery" id="box-gallery">
      <h2>GALERIE</h2>
      <p>Proiecte & evenimente.</p>
      <a class="btn ghost" href="{{ url_for('blog') }}#galerie">Deschide</a>
    </article>

    <!-- dreapta jos -->
    <article class="dna-box box-blog" id="box-blog">
      <h2>BLOG</h2>
      <p>Ultimele noutăți.</p>
      <a class="btn" href="{{ url_for('blog') }}">Citește</a>
    </article>

    <!-- coloana centrală: ADN animat -->
    <div class="dna-center">
      <div class="wrapper">
        <div class="dna">
          {# Marchează 3 "segmente" din helix pentru hover interactiv #}
          {% for i in range(24) %}
            <div
              style="--i: {{ i }}"
              {% if i == 4 %}  id="seg-top"    {% endif %}
              {% if i == 12 %} id="seg-mid"    {% endif %}
              {% if i == 20 %} id="seg-bottom" {% endif %}
            ></div>
          {% endfor %}
        </div>
      </div>
    </div>

  </section>
</div>

<!-- ===== CSS local ===== -->
<style>
  /* ---------------- Core ADN animat ---------------- */
  :root{
    --rotate: -90deg;

    /* responsive */
    --unit: 1vmin;
    --zoom: 160;
    --workspace-min: 768; /* device screen height = 768px */
    --upx: calc(var(--zoom) * (var(--unit) / var(--workspace-min)));

    /* DNA Helix loop */
    --animation-speed: 1;
    --helix-duration: 0.5s;
    --helix-iteration-factor: 0.05s;

    /* DNA model */
    --dna-max-height: calc(140 * var(--upx));
    --dna-nitrogenous-base-width: calc(6 * var(--upx));
    --dna-nitrogenous-base-margin: calc(8 * var(--upx));
    --dna-sugar-diameter: calc(15 * var(--upx));
    --dna-sugar-border-size: calc(6 * var(--upx));

    /* colors */
    --color-background: #151515;
    --color-sugar: #f2f1d5;
    --color-A: #ffba36;
    --color-T: #26f826;
    --color-C: #439AD9;
    --color-G: #E96451;
  }

  @media (orientation: portrait){
    :root{ --rotate: -58deg; }
  }

  html, body{
    padding: 0; margin: 0; width: 100%; height: 100%; display: block;
  }
  body{ background: var(--color-background); overflow: auto; }
  html{ scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.4) rgba(0,0,0,0); }

  /* Layout homepage existent — ajustează dacă ai deja stiluri globale */
  .homepage{ position: relative; }
  .hp-header{ text-align:center; padding: 3rem 1rem 1rem; color: #fff; }
  .hp-header h1{ margin:0; font-weight:800; letter-spacing:.5px; }

  .dna-layout{
    position: relative;
    min-height: 70vh;
    display: grid;
    grid-template-columns: 1fr minmax(280px, 520px) 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 2rem;
    align-items: center;
  }

  /* casetele (about/galerie/blog) în jurul helixului */
  .box-about{ grid-column: 3; grid-row: 1; }
  .box-gallery{ grid-column: 1; grid-row: 1 / span 2; align-self: center; }
  .box-blog{ grid-column: 3; grid-row: 2; }

  .dna-box{
    background: #1d1d1d;
    color: #fff;
    padding: 1.25rem 1.25rem 1rem;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.06);
    opacity: 0;
    transform: translateY(8px);
    transition: opacity .18s ease, transform .18s ease, box-shadow .18s ease;
    pointer-events: none;
  }
  .dna-box h2{ margin:0 0 .25rem 0; font-size: 1.1rem; letter-spacing:.3px; }
  .dna-box p{ margin:.25rem 0 .75rem; opacity:.85; }
  .dna-box .btn{
    display:inline-block; padding:.55rem .9rem; border-radius:10px;
    background:#2e7d32; color:#fff; text-decoration:none; font-weight:600;
  }
  .dna-box .btn.ghost{ background: transparent; border:1px solid #1976d2; color:#cfe9ff; }

  .dna-box.active{
    opacity: 1;
    transform: none;
    pointer-events: auto;
    box-shadow: 0 10px 28px rgba(0,0,0,.18);
  }

  /* zona centrală ADN */
  .dna-center{
    grid-column: 2; grid-row: 1 / span 2;
    display: grid; place-items: center;
    min-height: 520px;
    position: relative;
  }

  /* wrapper & helix */
  .wrapper{
    position: relative;
    transform: rotate(var(--rotate));
    transform-origin: 50% 50%;
  }

  .dna{
    display: flex;
    align-items: center;
    position: relative;
    height: var(--dna-max-height);
  }

  .dna > div{
    font-size: 0;
    position: relative;
    width: var(--dna-nitrogenous-base-width);
    height: 0;
    background: linear-gradient(0deg, var(--color-G) 50%, var(--color-C) 50%);
    display: inline-block;
    margin: 0 var(--dna-nitrogenous-base-margin);
    animation:
      double-helix
      ease
      calc(var(--helix-duration) / var(--animation-speed))
      calc((var(--i) * var(--helix-iteration-factor)) / var(--animation-speed))
      alternate
      infinite;
  }
  .dna > div:nth-child(2n){
    background: linear-gradient(0deg, var(--color-A) 50%, var(--color-T) 50%);
  }

  @keyframes double-helix{ to { height: var(--dna-max-height); } }

  .dna > div::before,
  .dna > div::after{
    content:"";
    position: absolute;
    left: 50%;
    width: var(--dna-sugar-diameter);
    height: var(--dna-sugar-diameter);
    display: block;
    border-radius: 50%;
    background: var(--color-sugar);
    border: var(--dna-sugar-border-size) solid var(--color-background);
    box-sizing: content-box;
  }
  .dna > div::before{ top: 0; transform: translate(-50%, -50%); }
  .dna > div::after{ bottom: 0; transform: translate(-50%, 50%); }

  /* ------------ segmente "interactive" ------------- */
  #seg-top, #seg-mid, #seg-bottom{ cursor: pointer; position: relative; }
  #seg-top:hover::before, #seg-top:hover::after{
    box-shadow: 0 0 16px rgba(76,175,80,.65);
  }
  #seg-mid:hover::before, #seg-mid:hover::after{
    box-shadow: 0 0 16px rgba(25,118,210,.65);
  }
  #seg-bottom:hover::before, #seg-bottom:hover::after{
    box-shadow: 0 0 16px rgba(229,57,53,.65);
  }

  /* accesibilitate vizuală subtilă pe segmentele interactive */
  #seg-top::after, #seg-mid::after, #seg-bottom::after{
    outline: 2px solid transparent; transition: outline-color .15s ease;
  }
  #seg-top:hover::after{ outline-color: rgba(76,175,80,.35); }
  #seg-mid:hover::after{ outline-color: rgba(25,118,210,.35); }
  #seg-bottom:hover::after{ outline-color: rgba(229,57,53,.35); }
</style>

<!-- ===== JS local: leagă segmentele de casetele corespunzătoare ===== -->
<script>
(function(){
  const pairs = {
    "seg-top": "box-about",     // verde -> CINE SUNTEM?
    "seg-mid": "box-gallery",   // albastru -> GALERIE
    "seg-bottom": "box-blog"    // roșu -> BLOG
  };

  const boxes = Object.values(pairs)
    .reduce((acc, id) => (acc[id] = document.getElementById(id), acc), {});

  function activate(id){
    Object.values(boxes).forEach(b => b.classList.remove('active'));
    if (boxes[id]) boxes[id].classList.add('active');
  }
  function clear(){ Object.values(boxes).forEach(b => b.classList.remove('active')); }

  Object.entries(pairs).forEach(([segId, boxId]) => {
    const seg = document.getElementById(segId);
    if (!seg) return;
    seg.addEventListener('mouseenter', () => activate(boxId));
    seg.addEventListener('mouseleave', clear);
    seg.addEventListener('focus', () => activate(boxId));     // accesibilitate (tab)
    seg.addEventListener('blur', clear);
  });

  Object.values(boxes).forEach(box => {
    box.addEventListener('mouseenter', () => box.classList.add('active'));
    box.addEventListener('mouseleave', clear);
  });

  // (opțional) pornește cu "CINE SUNTEM?" vizibil:
  // boxes["box-about"].classList.add("active");
})();
</script>
{% endblock %}
